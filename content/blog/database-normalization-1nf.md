## 核心概念：每個欄位都必須是原子性的（atomic），也就是不可再分割的單一值。

1NF 原則：

- 不允許使用行的順序來傳達資訊
- 不允許在同一個欄位中混合不同的資料類型
- 不允許表格沒有主鍵
- 不允許有重複群組

以下分別以例子舉例

例子 1：❌ 違反 1NF 的設計（新手常犯的錯誤）

例子 2：❌ 客戶的多個電話號碼（違反 1NF）

例子 3：❌ 商品的多張圖片（違反 1NF）

---

### 場景：訂單系統

假設我們要設計一個訂單資料庫，來看看違反和符合 1NF 的差異：

例子 1：❌ 違反 1NF 的設計（新手常犯的錯誤）

訂單表
訂單編號 | 客戶姓名 | 商品名稱 | 商品價格 | 數量 | 收件地址
---------|----------|----------------------------|----------------|--------------|------------------
ORD001 | 王小明 | iPhone 15, AirPods, 充電線 | 30000, 5000, 500 | 1, 2, 3 | 台北市信義區xxx路
ORD002 | 李小華 | MacBook Pro | 45000 | 1 | 新北市板橋區yyy路

### 這個設計違反了什麼？

違反規則 4（重複群組）：

「商品名稱」欄位有多個值：iPhone 15, AirPods, 充電線
「商品價格」欄位有多個值：30000, 5000, 500
「數量」欄位有多個值：1, 2, 3

實際問題：

無法單獨查詢「這張訂單裡 AirPods 賣了幾個？」
無法計算「AirPods 的總銷售量」
如果要新增第 4 個商品，需要修改欄位結構
價格和商品的對應關係只能靠「位置」（第一個價格對第一個商品），很容易出錯

✅ 符合 1NF 的正確設計
將訂單拆分成兩個表格：
訂單主表（Orders）

將訂單拆分成兩個表格：

訂單主表（Orders）
訂單編號(PK) | 客戶姓名 | 訂單日期 | 收件地址
-------------|----------|-----------|------------------
ORD001 | 王小明 | 2025-11-01| 台北市信義區xxx路
ORD002 | 李小華 | 2025-11-02| 新北市板橋區yyy路

訂單明細表（Order_Items）
明細編號(PK) | 訂單編號(FK) | 商品名稱 | 單價 | 數量 | 小計
-------------|--------------|--------------|--------|------|-------
1 | ORD001 | iPhone 15 | 30000 | 1 | 30000
2 | ORD001 | AirPods | 5000 | 2 | 10000
3 | ORD001 | 充電線 | 500 | 3 | 1500
4 | ORD002 | MacBook Pro | 45000 | 1 | 45000

現在的優點：

✅ 每個欄位都是單一值（原子性）
✅ 可以輕鬆查詢「AirPods 總共賣了幾個」
✅ 可以計算每個商品的銷售統計
✅ 新增商品不需要改結構，只要新增一筆記錄
✅ 每筆資料都有唯一識別（Primary Key）

---

例子 2：❌ 客戶的多個電話號碼（違反 1NF）

客戶表
客戶ID | 姓名 | 電話1 | 電話2 | 電話3 | Email
-------|--------|------------|------------|------------|------------------
C001 | 王小明 | 0912345678 | 02-12345678| 04-7654321 | wang@email.com
C002 | 李小華 | 0923456789 | NULL | NULL | lee@email.com

問題：

如果客戶有 4 支電話怎麼辦？要加 電話4 欄位嗎？
浪費空間（李小華的電話2、電話3 是 NULL）
無法彈性處理不同數量的電話

✅ 正確設計

客戶表
客戶ID(PK) | 姓名 | Email
-----------|--------|------------------
C001 | 王小明 | wang@email.com
C002 | 李小華 | lee@email.com

客戶電話表

| 電話ID(PK) | 客戶ID(FK) | 電話類型 | 電話號碼    |
| ---------- | ---------- | -------- | ----------- |
| 1          | C001       | 手機     | 0912345678  |
| 2          | C001       | 家用     | 02-12345678 |
| 3          | C001       | 辦公室   | 04-7654321  |
| 4          | C002       | 手機     | 0923456789  |

---

例子 3：❌ 商品的多張圖片（違反 1NF）

商品表
商品ID | 商品名稱 | 圖片
-------|-----------|----------------------------------------
P001 | iPhone 15 | img1.jpg, img2.jpg, img3.jpg, img4.jpg
P002 | AirPods | airpod1.jpg, airpod2.jpg

✅ 正確設計

商品表
商品ID(PK) | 商品名稱 | 描述
-----------|-----------|------------------
P001 | iPhone 15 | 最新款 iPhone
P002 | AirPods | 無線耳機

商品圖片表
圖片ID(PK) | 商品ID(FK) | 圖片URL | 排序
-----------|------------|--------------|------
1 | P001 | img1.jpg | 1
2 | P001 | img2.jpg | 2
3 | P001 | img3.jpg | 3
4 | P001 | img4.jpg | 4
5 | P002 | airpod1.jpg | 1
6 | P002 | airpod2.jpg | 2

---

符合 1NF 後，你的資料庫就能：

🔍 更容易查詢和統計
📊 更容易產生報表
🔧 更容易維護和擴充
🚀 更好的效能
